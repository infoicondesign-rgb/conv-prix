<!DOCTYPE html>
<html lang="fr-CA">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Conversion & Prix</title>
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#ffffff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="logo-192.png">
<style>
  :root{--bg:#f8fafc; --card:#ffffff; --muted:#475569; --text:#0f172a; --border:#e2e8f0; --acc:#2563eb;}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial}
  header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(255,255,255,.98),rgba(255,255,255,.94));border-bottom:1px solid var(--border)}
  .wrap{max-width:1000px;margin:0 auto;padding:12px}
  .brand{display:flex;align-items:center;gap:10px}
  .brand img{height:36px;width:auto}
  .brand h1{font-size:18px;margin:0}
  table{width:100%;border-collapse:collapse;font-size:15px;background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden}
  th,td{border-bottom:1px solid var(--border);padding:10px 8px;text-align:left}
  thead th{position:sticky;top:64px;background:var(--card);z-index:9}
  input[type=number]{width:100%;background:#ffffff;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:16px}
  input[type=number]:focus{outline:2px solid var(--acc); outline-offset:1px}
  .num{text-align:right;white-space:nowrap}
  .muted{color:var(--muted)}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px;margin:12px 0}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .field{flex:1 1 220px;display:flex;flex-direction:column;gap:6px}
  .totals{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
  .big{font-size:20px;font-weight:800}
  .sticky{position:sticky;bottom:0;background:linear-gradient(0deg,rgba(255,255,255,.98),rgba(255,255,255,.94));border-top:1px solid var(--border)}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="brand">
      <img src="data:image/png;base64,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" alt="Logo">
      <h1>Tableau de conversion prix</h1>
    </div>
  </div>
</header>

<main class="wrap" style="padding-bottom:120px;">
  <div class="card">
    <table>
      <thead>
        <tr>
          <th>Longueur</th>
          <th>Largeur</th>
          <th class="num">Pied²</th>
          <th>Type</th>
          <th class="num">Taux</th>
          <th class="num">Taux cost</th>
          <th class="num">Coût</th>
          <th class="num">Prix</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <div class="card">
    <div class="row">
      <div class="field">
        <label>Minutes — @ 100$/h</label>
        <input id="b26" type="number" inputmode="decimal" step="1" placeholder="0">
      </div>
      <div class="field">
        <label>Heures — @ 100$/h</label>
        <input id="b28" type="number" inputmode="decimal" step="0.25" placeholder="0">
      </div>
    </div>
    <div class="row">
      <div class="field"><label class="muted">Prix minutes</label><input id="d26" type="number" readonly></div>
      <div class="field"><label class="muted">Prix heures</label><input id="d28" type="number" readonly></div>
    </div>
  </div>
</main>

<div class="sticky">
  <div class="wrap">
    <div class="totals">
      <div><span class="muted">Total coût</span><br><span id="h26" class="big">—</span></div>
      <div><span class="muted">Total prix</span><br><span id="i26" class="big">—</span></div>
    </div>
  </div>
</div>

<script>
(function(){
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function(){ navigator.serviceWorker.register('./sw.js'); });
  }

  const data = {"rows": [{"type": "Pare-pierre 30''", "mode": "area", "largeur_default": 30.0, "taux": 11.0, "taux_cost": 5.25}, {"type": "Pare-pierre 60''", "mode": "area", "largeur_default": 60.0, "taux": 15.0, "taux_cost": 5.06}, {"type": "Murale", "mode": "area", "largeur_default": 0.0, "taux": 6.95, "taux_cost": 1.53}, {"type": "Découpe", "mode": "area", "largeur_default": 0.0, "taux": 5.95, "taux_cost": 0.54}, {"type": "WRAP 3M", "mode": "area", "largeur_default": 0.0, "taux": 40.0, "taux_cost": 13.33}, {"type": "WRAP HEXIS", "mode": "area", "largeur_default": 0.0, "taux": 40.0, "taux_cost": 13.33}, {"type": "WRAP Carbon", "mode": "area", "largeur_default": 0.0, "taux": 80.0, "taux_cost": 30.0}, {"type": "STD / LAM STD", "mode": "area", "largeur_default": 0.0, "taux": 7.65, "taux_cost": 1.0}, {"type": "STD / LAM WRAP", "mode": "area", "largeur_default": 0.0, "taux": 8.5, "taux_cost": 1.51}, {"type": "WRAP / LAM", "mode": "area", "largeur_default": 0.0, "taux": 11.0, "taux_cost": 2.18}, {"type": "PROMO LAM", "mode": "area", "largeur_default": 0.0, "taux": 6.95, "taux_cost": 0.75}, {"type": "PROMO / NONLAM", "mode": "area", "largeur_default": 0.0, "taux": 5.0, "taux_cost": 0.9}, {"type": "Reflec", "mode": "area", "largeur_default": 0.0, "taux": 9.95, "taux_cost": 2.62}, {"type": "Magnétique", "mode": "area", "largeur_default": 0.0, "taux": 20.0, "taux_cost": 1.5}, {"type": "Givré", "mode": "area", "largeur_default": 0.0, "taux": 6.95, "taux_cost": 1.15}, {"type": "Contre-vision", "mode": "area", "largeur_default": 0.0, "taux": 9.95, "taux_cost": 0.71}, {"type": "Découpe Gris CHK", "mode": "area", "largeur_default": 0.0, "taux": 9.95, "taux_cost": 2.57}, {"type": "Bannière", "mode": "area", "largeur_default": 0.0, "taux": 6.95, "taux_cost": 0.17}, {"type": "Aluco", "mode": "area", "largeur_default": 0.0, "taux": 3.25, "taux_cost": 1.88}, {"type": "Coro", "mode": "area", "largeur_default": 0.0, "taux": 2.0, "taux_cost": 0.45}], "config": {"labor_min_rate_price": 100.0, "labor_min_rate_cost": 40.0, "labor_hr_rate_price": 100.0, "labor_hr_rate_cost": 40.0}};
  const fmtCAD = new Intl.NumberFormat('fr-CA', {style:'currency', currency:'CAD'});
  function num(v){ if(v===null||v===undefined||v==='') return 0; v=(''+v).replace(',','.'); var n=parseFloat(v); return isNaN(n)?0:n; }

  function makeRow(r){
    var tr = document.createElement('tr');
    tr.dataset.idx = r;
    var row = data.rows[r];
    tr.innerHTML = ''
      + '<td><input type="number" step="0.1" placeholder="0" class="b"></td>'
      + '<td><input type="number" step="0.1" placeholder="0" class="c"></td>'
      + '<td class="num d">0</td>'
      + '<td>'+row.type+(row.mode==='linear'?' <span class="muted">(linéaire)</span>':'')+'</td>'
      + '<td class="num f">'+row.taux.toFixed(2)+'</td>'
      + '<td class="num g">'+row.taux_cost.toFixed(2)+'</td>'
      + '<td class="num h">0</td>'
      + '<td class="num i">0</td>';
    var b = tr.querySelector('.b');
    var c = tr.querySelector('.c');
    if (row.largeur_default) c.value = row.largeur_default;
    b.addEventListener('input', recalc);
    c.addEventListener('input', recalc);
    return tr;
  }

  function recalc(){
    var sumH=0, sumI=0;
    document.querySelectorAll('#tbody tr').forEach(function(tr){
      var idx = parseInt(tr.dataset.idx);
      var row = data.rows[idx];
      var b = num(tr.querySelector('.b').value);
      var c = num(tr.querySelector('.c').value);
      var d = (row.mode==='linear') ? b : (b*c)/144.0;
      var f = row.taux, g = row.taux_cost;
      var h = d*g;
      var i = (row.mode==='linear') ? (b*f) : (d*f);
      tr.querySelector('.d').textContent = d.toFixed(2);
      tr.querySelector('.h').textContent = fmtCAD.format(h);
      tr.querySelector('.i').textContent = fmtCAD.format(i);
      sumH += h; sumI += i;
    });
    var b26 = num(document.getElementById('b26').value);
    var b28 = num(document.getElementById('b28').value);
    var d26 = (b26/60.0)*100.0;
    var d28 = (b28)*100.0;
    document.getElementById('d26').value = d26.toFixed(2);
    document.getElementById('d28').value = d28.toFixed(2);
    var h26 = sumH + (b26/60.0)*40.0 + b28*40.0;
    var i26 = sumI + d26 + d28;
    document.getElementById('h26').textContent = fmtCAD.format(h26);
    document.getElementById('i26').textContent = fmtCAD.format(i26);
    try{ localStorage.setItem('conv_prix_state', JSON.stringify(serialize())); }catch(e){}
  }

  function serialize(){
    var rows = Array.prototype.slice.call(document.querySelectorAll('#tbody tr')).map(function(tr){
      return { b: tr.querySelector('.b').value, c: tr.querySelector('.c').value };
    });
    return { items: rows, b26: document.getElementById('b26').value, b28: document.getElementById('b28').value };
  }
  function deserialize(d){
    if(!d) return;
    var trs = document.querySelectorAll('#tbody tr');
    (d.items||[]).forEach(function(v,i){
      if(trs[i]){ trs[i].querySelector('.b').value = v.b||''; trs[i].querySelector('.c').value = v.c||''; }
    });
    document.getElementById('b26').value = d.b26||'';
    document.getElementById('b28').value = d.b28||'';
  }

  (function init(){
    var tbody = document.getElementById('tbody');
    data.rows.forEach(function(_,i){ tbody.appendChild(makeRow(i)); });
    var saved = localStorage.getItem('conv_prix_state');
    if(saved) try{ deserialize(JSON.parse(saved)); }catch(e){}
    document.getElementById('b26').addEventListener('input', recalc);
    document.getElementById('b28').addEventListener('input', recalc);
    recalc();
  })();
})();
</script>
</body>
</html>
